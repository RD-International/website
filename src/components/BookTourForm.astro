<form action='#' id='form' method='POST' class='lg:flex-auto'>
	<div class='grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2'>
		<div class='col-span-2'>
			<label for='name' class='block text-sm/6 font-semibold text-gray-900'>Full Name</label>
			<div class='mt-2.5'>
				<input
					type='text'
					name='name'
					id='name'
					autocomplete='given-name'
					class='block w-full rounded-md bg-white px-3.5 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-teal-600'
				/>
			</div>
		</div>
		<div class='col-span-2'>
			<label for='email' class='block text-sm/6 font-medium text-gray-900'>Email</label>
			<div class='mt-2 grid grid-cols-1'>
				<input
					type='email'
					name='email'
					id='email'
					class='col-start-1 row-start-1 block w-full rounded-md bg-white py-1.5 pl-10 pr-3 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:pl-9 sm:text-sm/6'
					placeholder='you@example.com'
				/>
				<svg
					class='pointer-events-none w-4 col-start-1 row-start-1 ml-3 size-5 self-center text-gray-400 sm:size-4'
					viewBox='0 0 16 16'
					fill='currentColor'
					aria-hidden='true'
					data-slot='icon'
				>
					<path
						d='M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z'
					></path>
					<path
						d='M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z'
					></path>
				</svg>
			</div>
		</div>
		<div>
			<label for='adultCount' class='block text-sm/6 font-semibold text-gray-900'
				>Number of Adults</label
			>
			<div class='mt-2.5'>
				<input
					type='number'
					name='adultCount'
					id='adultCount'
					class='block w-full rounded-md bg-white px-3.5 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-teal-600'
				/>
			</div>
		</div>

		<div>
			<label for='childrenCount' class='block text-sm/6 font-semibold text-gray-900'
				>Number of Children</label
			>
			<div class='mt-2.5'>
				<input
					type='number'
					name='childrenCount'
					id='childrenCount'
					class='block w-full rounded-md bg-white px-3.5 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-teal-600'
				/>
			</div>
		</div>

		<div>
			<label for='checkInDate' class='block text-sm/6 font-semibold text-gray-900'
				>Check-in Date</label
			>
			<div class='mt-2.5'>
				<input
					type='date'
					name='checkInDate'
					id='checkInDate'
					class='block w-full rounded-md bg-white px-3.5 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-teal-600'
				/>
			</div>
		</div>

		<div>
			<label for='checkOutDate' class='block text-sm/6 font-semibold text-gray-900'
				>Check-out Date</label
			>
			<div class='mt-2.5'>
				<input
					type='date'
					name='checkOutDate'
					id='checkOutDate'
					class='block w-full rounded-md bg-white px-3.5 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-teal-600'
				/>
			</div>
		</div>
		<div class='sm:col-span-2'>
			<label for='message' class='block text-sm/6 font-semibold text-gray-900'>Inquiries</label>
			<div class='mt-2.5'>
				<textarea
					id='message'
					name='message'
					rows='4'
					class='block w-full rounded-md bg-white px-3.5 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-teal-600'
				></textarea>
			</div>
		</div>
	</div>
	<div class='mt-10'>
		<a href='whatsapp://send?phone=+601123049307&text=example'>Send Whatsapp Message</a>
		<button
			type='submit'
			class='block w-full rounded-md bg-teal-600 px-3.5 py-2.5 text-center text-sm font-semibold text-white shadow-sm hover:bg-teal-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-600'
			>Book Tour</button
		>
	</div>

	<div id='result'></div>
</form>
<script is:inline>
	const form = document.getElementById('form')
	const result = document.getElementById('result')

	function sendWhatsappMessage(formData) {
		const checkinDate = formData.checkInDate.toString()
		const name = formData.name
		const url = window.location.toString()
		const message = `${url}
    Hello, I am ${name}. I saw the ${name} tour and I would like to book it. We are ${formData.adultCount + formData.childCount} many, ${formData.adultCount} adults and ${formData.childrenCount} children, checking in at ${checkinDate} and leaving at _.`
		window.location.replace(`whatsapp://send/?phone=+601123049307&text=${message}`)
	}

	form.addEventListener('submit', function (e) {
		const formData = new FormData(form)
		e.preventDefault()

		const object = Object.fromEntries(formData)
		const json = JSON.stringify(object)
		sendWhatsappMessage(object)
		return

		result.innerHTML = 'Please wait...'

		fetch('https://api.web3forms.com/submit', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json',
				Accept: 'application/json'
			},
			body: json
		})
			.then(async (response) => {
				let json = await response.json()
				if (response.status == 200) {
					result.innerHTML = json.message
				} else {
					console.log(response)
					result.innerHTML = json.message
				}
			})
			.catch((error) => {
				console.log(error)
				result.innerHTML = 'Something went wrong!'
			})
			.then(function () {
				form.reset()
				setTimeout(() => {
					result.style.display = 'none'
				}, 3000)
			})
	})
</script>
